import{I as y,K as fe,r as de,s as pe,a6 as me,u as V,v as ve,_ as ye,al as Se,W as P,a3 as he,Q as F,N as ee,S as O,R as z,H as we}from"./image.dc417329.js";import{u as Ee}from"./index.a0813760.js";import{af as g,F as x,az as ge,ah as E,as as Te,aS as Le,h as Y,al as Ce,a as T,b as w,w as Ae,e as Ne,i as L,j as A,k as b,z as q,m as be,u as d,n as I,E as _e,C as N,A as ze,B as Ie,H as Re,X as ke,ai as te,ap as Oe,f as Ye,G as R,l as Be}from"./framework.8f8f0586.js";const De=(e,s)=>{if(!y||!e||!s)return!1;const t=e.getBoundingClientRect();let n;return s instanceof Element?n=s.getBoundingClientRect():n={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},t.top<n.bottom&&t.bottom>n.top&&t.right>n.left&&t.left<n.right},Q=e=>{let s=0,t=e;for(;t;)s+=t.offsetTop,t=t.offsetParent;return s},Fe=(e,s)=>Math.abs(Q(e)-Q(s)),et=e=>{let s,t;return e.type==="touchend"?(t=e.changedTouches[0].clientY,s=e.changedTouches[0].clientX):e.type.startsWith("touch")?(t=e.touches[0].clientY,s=e.touches[0].clientX):(t=e.clientY,s=e.clientX),{clientX:s,clientY:t}},He=(e,s)=>{if(!y)return!1;const t={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(s)],n=fe(e,t);return["scroll","auto","overlay"].some(r=>n.includes(r))},$e=(e,s)=>{if(!y)return;let t=e;for(;t;){if([window,document,document.documentElement].includes(t))return window;if(He(t,s))return t;t=t.parentNode}return t};let k;const tt=e=>{var s;if(!y)return 0;if(k!==void 0)return k;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const n=t.offsetWidth;t.style.overflow="scroll";const r=document.createElement("div");r.style.width="100%",t.appendChild(r);const c=r.offsetWidth;return(s=t.parentNode)==null||s.removeChild(t),k=n-c,k};function nt(e,s){if(!y)return;if(!s){e.scrollTop=0;return}const t=[];let n=s.offsetParent;for(;n!==null&&e!==n&&e.contains(n);)t.push(n),n=n.offsetParent;const r=s.offsetTop+t.reduce((a,u)=>a+u.offsetTop,0),c=r+s.offsetHeight,v=e.scrollTop,o=v+e.clientHeight;r<v?e.scrollTop=r:c>o&&(e.scrollTop=c-e.clientHeight)}var h=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(h||{});function M(e){return g(e)&&e.type===x}function xe(e){return g(e)&&e.type===ge}function Me(e){return g(e)&&!M(e)&&!xe(e)}const st=e=>{if(!g(e))return{};const s=e.props||{},t=(g(e.type)?e.type.props:void 0)||{},n={};return Object.keys(t).forEach(r=>{Te(t[r],"default")&&(n[r]=t[r].default)}),Object.keys(s).forEach(r=>{n[Le(r)]=s[r]}),n},lt=e=>{if(!E(e)||e.length>1)throw new Error("expect to receive a single Vue element child");return e[0]},$=e=>{const s=E(e)?e:[e],t=[];return s.forEach(n=>{var r;E(n)?t.push(...$(n)):g(n)&&E(n.children)?t.push(...$(n.children)):(t.push(n),g(n)&&((r=n.component)!=null&&r.subTree)&&t.push(...$(n.component.subTree)))}),t},Ve=["src","loading"],We={key:0},Xe=Y({name:"ElImage",inheritAttrs:!1}),Ge=Y({...Xe,props:de,emits:pe,setup(e,{emit:s}){const t=e;let n="";const{t:r}=me(),c=V("image"),v=Ce(),o=Ee(),a=T(),u=T(!1),i=T(!0),f=T(!1),p=T(),m=T(),_=y&&"loading"in HTMLImageElement.prototype;let C,B;const ne=w(()=>v.style),se=w(()=>{const{fit:l}=t;return y&&l?{objectFit:l}:{}}),D=w(()=>{const{previewSrcList:l}=t;return Array.isArray(l)&&l.length>0}),le=w(()=>{const{previewSrcList:l,initialIndex:S}=t;let U=S;return S>l.length-1&&(U=0),U}),W=w(()=>t.loading==="eager"?!1:!_&&t.loading==="lazy"||t.lazy),H=()=>{y&&(i.value=!0,u.value=!1,a.value=t.src)};function re(l){i.value=!1,u.value=!1,s("load",l)}function oe(l){i.value=!1,u.value=!0,s("error",l)}function X(){De(p.value,m.value)&&(H(),K())}const G=he(X,200,!0);async function j(){var l;if(!y)return;await ke();const{scrollContainer:S}=t;Se(S)?m.value=S:te(S)&&S!==""?m.value=(l=document.querySelector(S))!=null?l:void 0:p.value&&(m.value=$e(p.value)),m.value&&(C=P(m,"scroll",G),setTimeout(()=>X(),100))}function K(){!y||!m.value||!G||(C==null||C(),m.value=void 0)}function ie(l){if(l.ctrlKey){if(l.deltaY<0)return l.preventDefault(),!1;if(l.deltaY>0)return l.preventDefault(),!1}}function ae(){D.value&&(B=P("wheel",ie,{passive:!1}),n=document.body.style.overflow,document.body.style.overflow="hidden",f.value=!0,s("show"))}function ue(){B==null||B(),document.body.style.overflow=n,f.value=!1,s("close")}function ce(l){s("switch",l)}return Ae(()=>t.src,()=>{W.value?(i.value=!0,u.value=!1,K(),j()):H()}),Ne(()=>{W.value?j():H()}),(l,S)=>(L(),A("div",{ref_key:"container",ref:p,class:I([d(c).b(),l.$attrs.class]),style:Re(d(ne))},[u.value?b(l.$slots,"error",{key:0},()=>[q("div",{class:I(d(c).e("error"))},be(d(r)("el.image.error")),3)]):(L(),A(x,{key:1},[a.value!==void 0?(L(),A("img",_e({key:0},d(o),{src:a.value,loading:l.loading,style:d(se),class:[d(c).e("inner"),d(D)&&d(c).e("preview"),i.value&&d(c).is("loading")],onClick:ae,onLoad:re,onError:oe}),null,16,Ve)):N("v-if",!0),i.value?(L(),A("div",{key:1,class:I(d(c).e("wrapper"))},[b(l.$slots,"placeholder",{},()=>[q("div",{class:I(d(c).e("placeholder"))},null,2)])],2)):N("v-if",!0)],64)),d(D)?(L(),A(x,{key:2},[f.value?(L(),ze(d(ve),{key:0,"z-index":l.zIndex,"initial-index":d(le),infinite:l.infinite,"zoom-rate":l.zoomRate,"url-list":l.previewSrcList,"hide-on-click-modal":l.hideOnClickModal,teleported:l.previewTeleported,"close-on-press-escape":l.closeOnPressEscape,onClose:ue,onSwitch:ce},{default:Ie(()=>[l.$slots.viewer?(L(),A("div",We,[b(l.$slots,"viewer")])):N("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):N("v-if",!0)],64)):N("v-if",!0)],6))}});var je=ye(Ge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const rt=F(je),Ke=ee({prefixCls:{type:String}}),Z=Y({name:"ElSpaceItem",props:Ke,setup(e,{slots:s}){const t=V("space"),n=w(()=>`${e.prefixCls||t.b()}__item`);return()=>Oe("div",{class:n.value},b(s,"default"))}}),J={small:8,default:12,large:16};function Ue(e){const s=V("space"),t=w(()=>[s.b(),s.m(e.direction),e.class]),n=T(0),r=T(0),c=w(()=>{const o=e.wrap||e.fill?{flexWrap:"wrap",marginBottom:`-${r.value}px`}:{},a={alignItems:e.alignment};return[o,a,e.style]}),v=w(()=>{const o={paddingBottom:`${r.value}px`,marginRight:`${n.value}px`},a=e.fill?{flexGrow:1,minWidth:`${e.fillRatio}%`}:{};return[o,a]});return Ye(()=>{const{size:o="small",wrap:a,direction:u,fill:i}=e;if(E(o)){const[f=0,p=0]=o;n.value=f,r.value=p}else{let f;O(o)?f=o:f=J[o||"small"]||J.small,(a||i)&&u==="horizontal"?n.value=r.value=f:u==="horizontal"?(n.value=f,r.value=0):(r.value=f,n.value=0)}}),{classes:t,containerStyle:c,itemStyle:v}}const Pe=ee({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:z([String,Object,Array]),default:""},style:{type:z([String,Array,Object]),default:""},alignment:{type:z(String),default:"center"},prefixCls:{type:String},spacer:{type:z([Object,String,Number,Array]),default:null,validator:e=>g(e)||O(e)||te(e)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:we,validator:e=>O(e)||E(e)&&e.length===2&&e.every(O)}}),qe=Y({name:"ElSpace",props:Pe,setup(e,{slots:s}){const{classes:t,containerStyle:n,itemStyle:r}=Ue(e);function c(v,o="",a=[]){const{prefixCls:u}=e;return v.forEach((i,f)=>{M(i)?E(i.children)&&i.children.forEach((p,m)=>{M(p)&&E(p.children)?c(p.children,`${o+m}-`,a):a.push(R(Z,{style:r.value,prefixCls:u,key:`nested-${o+m}`},{default:()=>[p]},h.PROPS|h.STYLE,["style","prefixCls"]))}):Me(i)&&a.push(R(Z,{style:r.value,prefixCls:u,key:`LoopKey${o+f}`},{default:()=>[i]},h.PROPS|h.STYLE,["style","prefixCls"]))}),a}return()=>{var v;const{spacer:o,direction:a}=e,u=b(s,"default",{key:0},()=>[]);if(((v=u.children)!=null?v:[]).length===0)return null;if(E(u.children)){let i=c(u.children);if(o){const f=i.length-1;i=i.reduce((p,m,_)=>{const C=[...p,m];return _!==f&&C.push(R("span",{style:[r.value,a==="vertical"?"width: 100%":null],key:_},[g(o)?o:Be(o,h.TEXT)],h.STYLE)),C},[])}return R("div",{class:t.value,style:n.value},i,h.STYLE|h.CLASS)}return u.children}}}),ot=F(qe);export{rt as E,h as P,ot as a,$e as b,et as c,st as d,lt as e,$ as f,tt as g,Fe as h,nt as s};
